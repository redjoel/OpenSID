tinymce.PluginManager.add('laporan_realisasi', function( editor, url ) {
	editor.addButton( 'laporan_realisasi', {
		text: 'Laporan Keuangan',
		icon: false,
		type: 'menubutton',
		menu: [
		{
			text: 'Laporan Keuangan (Belanja per Kelompok)',
			onclick: function() {
      var url = BASE_URL + "index.php/keuangan/cek_tahun";
      $.ajax({
        type: "GET",
        url: url,
        dataType: "json",
        processData: true,
        success: function (data) {
          editor.windowManager.open( {
            title: 'Pilih Tahun Laporan',
            body: [
              {
                type   : 'listbox',
                name   : 'tahun',
                label  : 'Tahun',
                values : data,
              },
            ],
            onsubmit: function( e ) {
              editor.insertContent('[[lap-RP-APBD,'+ e.data.tahun +']]');
            },
            width: 400,
            height: 140
          } )
        },
        error: function (xhr, status, error) {
            alert("Error! " + xhr.status + "\n" + error);
            console.log(xhr);
            console.log(base_url);
        }
      });
		}
	},
	{
		text: 'Laporan Keuangan (Belanja per Bidang)',
		onclick: function() {
		var url = BASE_URL + "index.php/keuangan/cek_tahun";
		$.ajax({
			type: "GET",
			url: url,
			dataType: "json",
			processData: true,
			success: function (data) {
				editor.windowManager.open( {
					title: 'Pilih Tahun Laporan',
					body: [
						{
							type   : 'listbox',
							name   : 'tahun',
							label  : 'Tahun',
							values : data,
						},
					],
					onsubmit: function( e ) {
						editor.insertContent('[[lap-RP-APBD-Bidang,'+ e.data.tahun +']]');
					},
					width: 400,
					height: 140
				} )
			},
			error: function (xhr, status, error) {
					alert("Error! " + xhr.status + "\n" + error);
					console.log(xhr);
					console.log(base_url);
			}
		});
	}
}
]
	});
});
